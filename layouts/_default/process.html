{{ define "main" }}
<!-- Global Background: Protocol / Blueprints -->
<div class="fixed inset-0 pointer-events-none z-0">
    <!-- Using the Protocol Card Art as global texture -->
    <div
        class="absolute inset-0 bg-[url('/img/card_protocol_illustrative_v2.png')] bg-cover bg-center opacity-30 mix-blend-color-dodge saturate-150 blur-3xl scale-110">
    </div>
    <div class="absolute inset-0 bg-neutral-900/90"></div>
    <!-- Grid Overlay -->
    <div
        class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTTAgNDBWMH0wIDBoNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSg2LCAxODIsIDIxMiwgMC4wNSkiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')] opacity-30">
    </div>
</div>

<div class="max-w-5xl mx-auto px-4 py-8 relative z-10">

    <!-- Header: System Online -->
    <div class="mb-16 text-center">
        <span
            class="inline-block border border-cyan-500/30 bg-cyan-900/10 px-3 py-1 rounded text-cyan-400 font-mono text-xs tracking-widest uppercase mb-4 animate-pulse">
            System: Online
        </span>
        <h1 class="text-4xl md:text-6xl font-serif font-bold text-white drop-shadow-[0_0_10px_rgba(6,182,212,0.8)]">
            PROTOCOL
        </h1>
        <p class="text-gray-400 mt-4 max-w-xl mx-auto font-light text-sm">
            Strict adherence to the following algorithm guarantees optimal results. <br>
            <span class="text-cyan-600 font-mono text-xs">// EXECUTE_ORDER_66</span>
        </p>
    </div>

    <!-- Timeline: The Circuit -->
    <div class="relative py-12 mb-24">
        <!-- Vertical Line (The Bus) -->
        <div
            class="absolute left-4 md:left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-transparent via-cyan-500/50 to-transparent">
        </div>

        <div class="space-y-20">
            {{ range $idx, $phase := .Params.phases }}
            {{ $stepNum := add $idx 1 }}
            <div class="relative grid grid-cols-1 md:grid-cols-2 gap-8 items-center group">

                <!-- LEFT: Step Number & Title (Large, Prominent) -->
                <div
                    class="relative z-10 {{ if eq (mod $stepNum 2) 0 }}md:order-2 md:text-right{{ else }}md:order-1{{ end }}">
                    <!-- Step Badge -->
                    <span
                        class="inline-block bg-cyan-500/20 border border-cyan-500/40 text-cyan-400 font-mono text-xs font-black px-3 py-1 rounded mb-4">
                        STEP {{ printf "%02d" $stepNum }}
                    </span>
                    <!-- Title -->
                    <h3
                        class="text-4xl md:text-5xl font-black text-white uppercase tracking-tight leading-none group-hover:text-cyan-100 transition-colors">
                        {{ $phase.title }}
                    </h3>
                    <!-- Decorative Line -->
                    <div
                        class="mt-4 h-1 w-20 bg-gradient-to-r from-cyan-500 to-transparent {{ if eq (mod $stepNum 2) 0 }}md:ml-auto{{ end }}">
                    </div>
                </div>

                <!-- RIGHT: Image Card with Description Inside -->
                <div class="relative {{ if eq (mod $stepNum 2) 0 }}md:order-1{{ else }}md:order-2{{ end }}">
                    <div class="relative rounded-xl overflow-hidden border border-cyan-500/30 group-hover:border-cyan-400/60 transition-all shadow-lg group-hover:shadow-[0_0_30px_rgba(6,182,212,0.3)]"
                        style="min-height: 16rem; background: {{ if eq (mod $stepNum 3) 1 }}url('/img/art_cyan.png'){{ else if eq (mod $stepNum 3) 2 }}url('/img/art_purple.png'){{ else }}url('/img/art_gold.png'){{ end }} center/cover, linear-gradient(135deg, #0e7490 0%, #164e63 100%);">
                        <!-- Gradient Overlay (Darker at bottom) -->
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/70 to-transparent"></div>
                        <!-- Description Text (Inside Image) -->
                        <div class="absolute bottom-0 left-0 right-0 p-6">
                            <p class="text-lg text-white font-bold leading-relaxed drop-shadow-lg">
                                {{ $phase.desc }}
                            </p>
                        </div>

                    </div>
                </div>


            </div>
            {{ end }}
        </div>


    </div>

    <!-- FAQ Section: Troubleshooting -->
    <div class="max-w-3xl mx-auto">
        <h3
            class="text-xs font-mono text-gold-500 uppercase tracking-[0.2em] mb-8 text-center border-b border-white/10 pb-4">
            /// TROUBLESHOOTING_LOG
        </h3>

        <div class="space-y-4">
            {{ range .Params.faq.items }}
            <div
                class="bg-neutral-800/50 border border-white/5 rounded-lg overflow-hidden hover:border-gold-500/30 transition-colors group">
                <div class="p-4 flex items-start gap-4">
                    <span class="text-gold-500 font-mono font-bold mt-1">Q:</span>
                    <div>
                        <h4 class="text-white font-bold text-sm mb-2 group-hover:text-gold-400 transition-colors">{{ .q
                            }}</h4>
                        <p class="text-gray-400 text-sm font-light leading-relaxed border-l-2 border-white/10 pl-3">
                            <span class="text-gray-600 font-mono text-xs block mb-1">A:</span>
                            {{ .a }}
                        </p>
                    </div>
                </div>
            </div>
            {{ end }}
        </div>

        <div class="mt-16 text-center">
            <a href="/about/#contact"
                class="inline-block px-8 py-3 rounded text-center text-xs font-bold uppercase tracking-wider text-black bg-gradient-to-r from-cyan-200 via-cyan-400 to-cyan-200 bg-[length:200%_auto] hover:bg-right transition-all duration-500 shadow-[0_0_15px_rgba(6,182,212,0.4)] animate-wiggle">
                Accept Protocol & Begin
            </a>
        </div>
    </div>

</div>
{{ end }}